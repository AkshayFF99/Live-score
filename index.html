<!DOCTYPE html>
<html>
<head>
  <title>Live Cricket Score</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f9f9f9; }
    h1 { text-align: center; }
    #score { font-size: 18px; margin-top: 20px; text-align: center; }
    #debug { margin-top: 20px; font-size: 12px; color: gray; }
  </style>
</head>
<body>
  <h1>Live Cricket Score</h1>
  <div id="score">Loading...</div>
  <div id="debug">Debug info will appear here...</div>

  <script>
    async function fetchScore() {
      const scoreEl = document.getElementById("score");
      const debugEl = document.getElementById("debug");
      const proxyUrl = 'https://corsproxy.io/?url=https://api.cricketdata.org/v1/match/live';

      scoreEl.innerText = "Loading...";
      debugEl.innerText = `Fetching: ${proxyUrl}`;

      try {
        const resp = await fetch(proxyUrl, {
          headers: {
            'apikey': '9d3d3d6e-df26-4054-97e8-a1e6346e7496'
          }
        });

        debugEl.innerText += `\nStatus: ${resp.status}`;
        if (!resp.ok) {
          scoreEl.innerText = `API Error: ${resp.status}`;
          return;
        }

        const data = await resp.json();
        debugEl.innerText += `\nData keys: ${Object.keys(data).join(", ")}`;
        console.log("Data:", data);

        if (data.status === "success" && data.data.length > 0) {
          const m = data.data[0];
          scoreEl.innerText = `${m.team1.name} vs ${m.team2.name}: ${m.score}`;
        } else {
          scoreEl.innerText = "No live match found.";
        }

      } catch (err) {
        scoreEl.innerText = "Error fetching score.";
        debugEl.innerText += `\nCatch Error: ${err.message}`;
        console.error(err);
      }
    }

    fetchScore();
    setInterval(fetchScore, 60000);
  </script>
</body>
</html>
